# Background
## Google OR-Tools
Solver in this OR-Tools is used to solve for the optimal solution. It takes in the formulation matrix with defined objective functions and relationships with RHS. 

In this project, links are set to be binary variables which means if a link is selected, the corresponding variable is 1, if a link is not selected, the variable is 0.




## Constrained Shortest Path (CSP)

Randomgraph is used to generate the topology of a network. Each link in the network will have three attributes: cost, latency and bandwidth.

Topology will be generated in .json file. Other link info files will aslo be generated for later use.

- nodes: Number of nodes in the graph
- p: Probability of link creation
- max_latency: Used for testing the heuristic sorting method. Can be set to 99999 for regular topology.
- bwlimit: Remove any link that is lower than this bwlimit. There is connectivity check before the final creation of the topology, new topology will be created if the current one is not connected.

Formualtion:

![alt text](https://github.com/yifei666/pce/blob/e65eec6f1b4886e68c26d332420f64d34ff397eb/Reference/CSP_formulation_latex.png)

## Load Balancing

Load Balancing is developed based on the CSP problem. User can input a list of queries and get the overall optimal solutions. 

Example Formualtion:

![alt text](https://github.com/yifei666/pce/blob/91f8fb82f85d5ada8714b597c5cd5ae4979ba92b/Reference/LoadBalancing_Ex.png)

## Utility and Benchmark

Other utility funcions are aslo included, such as: Dijkstra algorithms, Network connectivity check, etc.

Benchmark results are also provided. Computation time and cost difference std are being tested between solver formulation and heurtistic sorting methods( by latency and by cost).

## Json file Table

All of the following files are located in `test/data`.

Input (Need to be manually input by user.)

| File Name   | Field                                                                                                                                      | Use   
| ------------- |--------------------------------------------------------------------------------------------------------------------------------------------| --------    |
| `connection.json`      | Called by RandomTopologyGenerator.GetConnection(path) before using RandomTopologyGenerator.lbnxgraphgenerator() to generate the TE matrix. | Contains all connection queries from users. Can contain one or multiple connections in one file.     |

\
Intermediate (Automatically generated when TE matrix is being generated.)

| File Name            | Field                                                                                                                                                                 | Use                                                                                                                                          
|----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------|
| `LB_data.json`       | Generated by the RandomTopologyGenerator.lbnxgraphgenerator(). Called by every Solver's create_data_model().                                                          | TE matrix data model which Solver can read and process.                                                                                      |
| `LB_linklist.json`   | Generated by the RandomTopologyGenerator.lbnxgraphgenerator(). Called by each Solver's solution_translator()                                                          | Learn from the NetworkX graph and show every path from node to node. Used as a reference to translate Solver solution into actual path list. |
| `bwlinklist.json`    | Generated by the RandomTopologyGenerator.lbnxgraphgenerator(). Also used to add the bandwidth constraint into the TE matrix when the LB_Utilization_Solver is called. | Store each path's bandwidth for future use.                                                                                                  |
| `latency_list.json`  | Generated by the RandomTopologyGenerator.lbnxgraphgenerator(). Later called by RandomTopologyGenerator.latconstraintmaker().                                                                  | Store all path's latency, and later being used to generate the latency constraint into TE matrix.                                            |
| `latconstraint.json` | Generated by the RandomTopologyGenerator.latconstraintmaker(). Later called by RandomTopologyGenerator.jsonfilemaker()                                                                                                | Translate the latency list into TE matrix format which can directly append to the TE matrix.                                                 |


